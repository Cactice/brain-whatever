(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7091:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return P}});var r=t(5893),o=t(4121),i=t(6265),c=t(809),a=t.n(c),s=t(2447),u=t(9999),f=t(7135),l=t(264),m=t(7294),p=t(5769),d=t(6882),g=t(8332),h=t(5648),j=t(2212);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O,w=function(e){return new j.Vector3(e.x,e.y,e.z)},y=Object.fromEntries(Object.entries({11:"LeftArm",13:"LeftForeArm",15:"LeftHand",23:"LeftUpLeg",25:"LeftLeg",27:"LeftLeg"}).map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return[t,"mixamorig".concat(r)]}))),x=Object.fromEntries(Object.entries(y).map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return[Number(t)+1,r.replace("Left","Right")]}))),k=b(b({},y),x),E=(O=k,Object.fromEntries(Object.entries(O).map((function(e){var n=(0,o.Z)(e,2),t=n[0];return[n[1],t]})))),L=function(e){var n=e.landmarks,t=(0,p.m)("stacy.jpg"),o=(0,d.L)("dancer.glb","/").nodes,i=o.Beta_Surface,c=(0,h.Ky)().camera;return(0,m.useEffect)((function(){console.log(o),c.translateX(500)}),[]),(0,m.useEffect)((function(){!function(e,n){Object.keys(k).map((function(t){var r,o=e[Number(t)],i=n[k[t]],c=null!==i&&void 0!==i&&null!==(r=i.parent)&&void 0!==r&&r.name?e[Number(E[i.parent.name])]:{x:0,y:0,z:0},a=w(o),s=w(null!==c&&void 0!==c?c:{x:0,y:0,z:0}),u=(new j.Euler).setFromVector3(s.sub(a));i&&i.setRotationFromEuler(u)}))}(n,o)}),[n]),(0,r.jsx)("group",{dispose:null,children:"geometry"in i?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("group",{rotation:[Math.PI/2,Math.PI/2,0],children:[(0,r.jsx)("primitive",{object:o.mixamorigHips}),(0,r.jsx)("skinnedMesh",{receiveShadow:!0,castShadow:!0,geometry:i.geometry,skeleton:i.skeleton,children:(0,r.jsx)("meshStandardMaterial",{map:t,"map-flipY":!1,skinning:!0})}),(0,r.jsx)(g.z,{camera:c})]})}):null})},P=function(){var e=(0,m.useRef)(null);(0,m.useRef)(null);(0,m.useEffect)((function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(n){e.current&&(e.current.srcObject=n)})).catch((function(e){console.log("Something went wrong!"),console.log(e)}))}),[]);var n=function(e){var n=e.videoRef,t=(0,m.useState)(null),r=t[0],o=t[1];return(0,m.useEffect)((function(){var e=n.current,t=new l.Pose({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/pose/".concat(e)}});t.setOptions({modelComplexity:1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),t.onResults((function(e){e.poseLandmarks&&o((0,u.Z)(e.poseLandmarks))})),e&&new f.Camera(e,{onFrame:function(){var n=(0,s.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.send({image:e});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),width:1280,height:720}).start()}),[n]),r}({videoRef:e});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Xz,{style:{height:"70vh"},children:(0,r.jsx)(m.Suspense,{fallback:null,children:n&&(0,r.jsx)(L,{landmarks:n})})}),(0,r.jsx)("video",{autoPlay:!0,ref:e,width:300})]})}},5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7091)}])}},function(e){e.O(0,[774,737,799,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);