(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7091:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(5893),o=t(4121),i=t(6265),a=t(809),c=t.n(a),s=t(2447),u=t(9999),l=t(7135),f=t(264),m=t(7294),d=t(5769),p=t(6882),h=t(8332),v=t(5648),j=t(2212);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=function(e){return(0,r.jsxs)("mesh",b(b({},e),{},{children:[(0,r.jsx)("boxGeometry",{args:[10,10,10]}),(0,r.jsx)("meshStandardMaterial",{color:"blue"})]}))};var x,y=function(e){return new j.Vector3(e.x,-e.y,e.z)},w=Object.fromEntries(Object.entries({11:"LeftArm"}).map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return[t,"mixamorig".concat(r)]}))),k=(Object.fromEntries(Object.entries(w).map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return[Number(t)+1,r.replace("Left","Right")]}))),b({},w)),E=b(b({},(x=k,Object.fromEntries(Object.entries(x).map((function(e){var n=(0,o.Z)(e,2),t=n[0];return[n[1],t]}))))),{},{LeftShoulder:"11",RightShoulder:"12"}),P=function(e){var n=e.landmarks,t=(0,d.m)("stacy.jpg"),o=(0,p.L)("dancer.glb","/").nodes,i=o.Beta_Surface,a=(0,v.Ky)().camera;return(0,m.useEffect)((function(){console.log(o),a.translateZ(-500)}),[]),(0,m.useEffect)((function(){!function(e,n){Object.keys(k).map((function(t){var r=e[Number(t)],o=n[k[t]];if(o){var i,a=null!==o&&void 0!==o&&null!==(i=o.parent)&&void 0!==i&&i.name?e[Number(E[o.parent.name])]:{x:0,y:0,z:0},c=y(r),s=y(null!==a&&void 0!==a?a:{x:0,y:0,z:0}),u=(new j.Euler).setFromVector3(s.sub(c)),l=new j.Quaternion;null===o||void 0===o||o.getWorldQuaternion(l),o.setRotationFromEuler(u)}}))}(n,o)}),[n]),(0,r.jsx)("group",{dispose:null,children:"geometry"in i?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("group",{rotation:[Math.PI/2,0,Math.PI],children:[(0,r.jsx)("primitive",{object:o.mixamorigHips}),(0,r.jsx)("skinnedMesh",{receiveShadow:!0,castShadow:!0,geometry:i.geometry,skeleton:i.skeleton,children:(0,r.jsx)("meshStandardMaterial",{map:t,"map-flipY":!1,skinning:!0})}),(0,r.jsx)(h.z,{camera:a})]})}):null})},_=function(){var e=(0,m.useRef)(null);(0,m.useRef)(null);(0,m.useEffect)((function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(n){e.current&&(e.current.srcObject=n)})).catch((function(e){console.log("Something went wrong!"),console.log(e)}))}),[]);var n=function(e){var n=e.videoRef,t=(0,m.useState)(null),r=t[0],o=t[1];return(0,m.useEffect)((function(){var e=n.current,t=new f.Pose({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/pose/".concat(e)}});t.setOptions({modelComplexity:1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),t.onResults((function(e){e.poseLandmarks&&o((0,u.Z)(e.poseLandmarks))})),e&&new l.Camera(e,{onFrame:function(){var n=(0,s.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.send({image:e});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),width:1280,height:720}).start()}),[n]),r}({videoRef:e});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.Xz,{style:{height:"70vh"},children:[(null===n||void 0===n?void 0:n.length)&&n.map((function(e,n){var t=e.x,o=e.y,i=e.z;return(0,r.jsx)(O,{position:[100*-t,100*-o,100*i]},n)})),(0,r.jsx)(m.Suspense,{fallback:null,children:n&&(0,r.jsx)(P,{landmarks:n})})]}),(0,r.jsx)("video",{autoPlay:!0,ref:e,width:300})]})}},5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7091)}])}},function(e){e.O(0,[774,737,799,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);